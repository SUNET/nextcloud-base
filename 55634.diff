diff --git a/apps/federatedfilesharing/lib/Notifications.php b/apps/federatedfilesharing/lib/Notifications.php
index 613c05613efb1..0f2b1ee2a66bf 100644
--- a/apps/federatedfilesharing/lib/Notifications.php
+++ b/apps/federatedfilesharing/lib/Notifications.php
@@ -361,8 +361,9 @@ protected function tryLegacyEndPoint($remoteDomain, $urlSuffix, array $fields) {
 	protected function tryOCMEndPoint($remoteDomain, $fields, $action) {
 		switch ($action) {
 			case 'share':
+				$shareRemoteDomain = (!str_contains($remoteDomain, '://')) ? $remoteDomain : parse_url($remoteDomain, PHP_URL_HOST);
 				$share = $this->cloudFederationFactory->getCloudFederationShare(
-					$fields['shareWith'] . '@' . $remoteDomain,
+					$fields['shareWith'] . '@' . $shareRemoteDomain,
 					$fields['name'],
 					'',
 					$fields['remoteId'],
diff --git a/lib/private/Federation/CloudFederationNotification.php b/lib/private/Federation/CloudFederationNotification.php
index 6ae805df1d98c..d8f6d87f3e237 100644
--- a/lib/private/Federation/CloudFederationNotification.php
+++ b/lib/private/Federation/CloudFederationNotification.php
@@ -32,7 +32,7 @@ public function setMessage($notificationType, $resourceType, $providerId, array
 		$this->message = [
 			'notificationType' => $notificationType,
 			'resourceType' => $resourceType,
-			'providerId' => $providerId,
+			'providerId' => (string)$providerId,
 			'notification' => $notification,
 		];
 	}
diff --git a/lib/private/Federation/CloudFederationShare.php b/lib/private/Federation/CloudFederationShare.php
index 2eb06b3acea05..6bd35cea763e4 100644
--- a/lib/private/Federation/CloudFederationShare.php
+++ b/lib/private/Federation/CloudFederationShare.php
@@ -124,7 +124,7 @@ public function setDescription($description) {
 	 * @since 14.0.0
 	 */
 	public function setProviderId($providerId) {
-		$this->share['providerId'] = $providerId;
+		$this->share['providerId'] = (string)$providerId;
 	}
 
 	/**
